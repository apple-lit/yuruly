# Yuru-Plan å®Ÿè£…ã‚¬ã‚¤ãƒ‰

## ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³

### âœ… å®Œäº†ã—ã¦ã„ã‚‹æ©Ÿèƒ½

1. **ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ï¼ˆãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸ï¼‰**
   - ã‚µãƒ¼ãƒ“ã‚¹ã®ç‰¹å¾´ã‚’ç´¹ä»‹
   - 3ã‚¹ãƒ†ãƒƒãƒ—ã®ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰
   - CTAãƒœã‚¿ãƒ³ã§ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆç”»é¢ã¸é·ç§»

2. **ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆç”»é¢**
   - ã‚¤ãƒ™ãƒ³ãƒˆåãƒ»èª¬æ˜ã®å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ 
   - ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UI
     - è¤‡æ•°æ—¥ã®é¸æŠãƒ»è§£é™¤
     - é¸æŠæ¸ˆã¿æ—¥ä»˜ã®ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
     - æœˆã®åˆ‡ã‚Šæ›¿ãˆ
   - æŸ”è»Ÿãªæ™‚é–“è¨­å®š
     - çµ‚æ—¥ï¼ˆæ™‚é–“æŒ‡å®šãªã—ï¼‰
     - ã–ã£ãã‚Šæ ï¼ˆæœãƒ»æ˜¼ãƒ»å¤•æ–¹ãƒ»å¤œï¼‰
     - è©³ç´°æ™‚é–“ï¼ˆé–‹å§‹ã€œçµ‚äº†ï¼‰
   - é¸æŠä¸­ã®å€™è£œæ—¥ã®ãƒªã‚¹ãƒˆè¡¨ç¤º
   - ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³å¼ã®è©³ç´°ç·¨é›†UI
   - ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³

### ğŸ¨ ãƒ‡ã‚¶ã‚¤ãƒ³ã®ç‰¹å¾´

- **ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ**
  - Primary: Soft Purple (HSL 280, 70%, 75%)
  - Secondary: Soft Mint (HSL 150, 60%, 85%)
  - Accent: Soft Pink (HSL 340, 80%, 85%)
  - Background: ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆpurple â†’ blue â†’ greenï¼‰

- **ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³**
  - ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ï¼ˆ0.5s ease-outï¼‰
  - ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›ï¼ˆhoveræ™‚ï¼‰
  - ãƒ•ãƒ­ãƒ¼ãƒˆåŠ¹æœï¼ˆãƒ­ã‚´ã‚¢ã‚¤ã‚³ãƒ³ï¼‰

- **UI/UXã®ã“ã ã‚ã‚Š**
  - è§’ä¸¸ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆ1rem = 16pxï¼‰
  - ã‚¬ãƒ©ã‚¹ãƒ¢ãƒ¼ãƒ•ã‚£ã‚ºãƒ ï¼ˆbackdrop-blurï¼‰
  - ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼
  - ãƒã‚¤ã‚¯ãƒ­ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³

## Next Steps: æ¬¡ã«å®Ÿè£…ã™ã¹ãæ©Ÿèƒ½

### Phase 2: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é€£æº

1. **Supabase ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**
   ```bash
   npm install @supabase/supabase-js
   ```

2. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆ**
   ```sql
   -- events ãƒ†ãƒ¼ãƒ–ãƒ«
   CREATE TABLE events (
     id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
     title TEXT NOT NULL,
     description TEXT,
     admin_url_token TEXT UNIQUE NOT NULL,
     created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
   );

   -- event_dates ãƒ†ãƒ¼ãƒ–ãƒ«
   CREATE TABLE event_dates (
     id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
     event_id UUID REFERENCES events(id) ON DELETE CASCADE,
     date DATE NOT NULL,
     time_type TEXT NOT NULL, -- 'none', 'rough', 'detailed'
     rough_time TEXT, -- 'morning', 'afternoon', 'evening', 'night'
     start_time TIME,
     end_time TIME
   );

   -- responses ãƒ†ãƒ¼ãƒ–ãƒ«
   CREATE TABLE responses (
     id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
     event_id UUID REFERENCES events(id) ON DELETE CASCADE,
     name TEXT NOT NULL,
     comment TEXT,
     created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
   );

   -- response_answers ãƒ†ãƒ¼ãƒ–ãƒ«
   CREATE TABLE response_answers (
     id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
     response_id UUID REFERENCES responses(id) ON DELETE CASCADE,
     event_date_id UUID REFERENCES event_dates(id) ON DELETE CASCADE,
     status TEXT NOT NULL, -- 'yes', 'maybe', 'no'
     UNIQUE(response_id, event_date_id)
   );
   ```

3. **ç’°å¢ƒå¤‰æ•°è¨­å®š**
   ```env
   NEXT_PUBLIC_SUPABASE_URL=your-project-url
   NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
   ```

### Phase 3: å›ç­”ç”»é¢ã®å®Ÿè£…

1. **å›ç­”ç”»é¢ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (`/event/[id]/page.tsx`)**
   - ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã®è¡¨ç¤º
   - ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼/ãƒªã‚¹ãƒˆãƒ“ãƒ¥ãƒ¼ã®åˆ‡ã‚Šæ›¿ãˆ
   - ã‚¿ãƒƒãƒ—ã§â—¯â†’â–³â†’âœ•ã®åˆ‡ã‚Šæ›¿ãˆ
   - åå‰ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆå…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ 
   - å›ç­”ã®é€ä¿¡

2. **å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ**
   ```typescript
   // components/response-form.tsx
   const [answers, setAnswers] = useState<Record<string, 'yes' | 'maybe' | 'no'>>({});
   
   const toggleAnswer = (dateId: string) => {
     setAnswers(prev => {
       const current = prev[dateId] || 'no';
       const next = current === 'no' ? 'yes' : current === 'yes' ? 'maybe' : 'no';
       return { ...prev, [dateId]: next };
     });
   };
   ```

### Phase 4: çµæœè¡¨ç¤ºç”»é¢

1. **çµæœè¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (`/event/[id]/results/page.tsx`)**
   - ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—å½¢å¼ã®ãƒ™ã‚¹ãƒˆæ—¥ç¨‹è¡¨ç¤º
   - å‡ºæ¬ è¡¨ï¼ˆãƒãƒˆãƒªãƒƒã‚¯ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
   - å›ç­”è€…ä¸€è¦§
   - ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½

2. **ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—ã®è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯**
   ```typescript
   const calculateBestDates = (responses: Response[]) => {
     const scoreboard = new Map<string, number>();
     
     responses.forEach(response => {
       response.answers.forEach(answer => {
         const score = answer.status === 'yes' ? 1 : answer.status === 'maybe' ? 0.5 : 0;
         scoreboard.set(
           answer.event_date_id,
           (scoreboard.get(answer.event_date_id) || 0) + score
         );
       });
     });
     
     return Array.from(scoreboard.entries())
       .sort((a, b) => b[1] - a[1]);
   };
   ```

### Phase 5: ç®¡ç†æ©Ÿèƒ½

1. **ç®¡ç†ç”»é¢ (`/event/[id]/admin/[token]/page.tsx`)**
   - ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã®ç·¨é›†
   - å€™è£œæ—¥ã®è¿½åŠ ãƒ»å‰Šé™¤
   - ã‚¤ãƒ™ãƒ³ãƒˆã®å‰Šé™¤
   - å›ç­”ã®ç®¡ç†

2. **URLç”Ÿæˆã¨ãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†**
   ```typescript
   const generateAdminToken = () => {
     return crypto.randomUUID();
   };
   
   const createEvent = async (data: EventData) => {
     const adminToken = generateAdminToken();
     const event = await supabase
       .from('events')
       .insert({ ...data, admin_url_token: adminToken })
       .select()
       .single();
     
     return {
       viewUrl: `/event/${event.id}`,
       adminUrl: `/event/${event.id}/admin/${adminToken}`
     };
   };
   ```

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### æ¨å¥¨äº‹é …

1. **ç”»åƒæœ€é©åŒ–**
   ```typescript
   // next.config.js
   module.exports = {
     images: {
       formats: ['image/avif', 'image/webp'],
     },
   }
   ```

2. **å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆ**
   ```typescript
   const EventCreator = dynamic(() => import('@/components/event-creator'), {
     loading: () => <LoadingSpinner />
   });
   ```

3. **ãƒ¡ãƒ¢åŒ–**
   ```typescript
   const calendarDays = useMemo(() => 
     eachDayOfInterval({ start: monthStart, end: monthEnd }),
     [monthStart, monthEnd]
   );
   ```

## ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### å˜ä½“ãƒ†ã‚¹ãƒˆ

```bash
npm install -D @testing-library/react @testing-library/jest-dom jest
```

### E2Eãƒ†ã‚¹ãƒˆ

```bash
npm install -D @playwright/test
```

## ãƒ‡ãƒ—ãƒ­ã‚¤

### Vercelã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

1. GitHubãƒªãƒã‚¸ãƒˆãƒªã«ãƒ—ãƒƒã‚·ãƒ¥
2. Vercelã§æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
3. ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
4. ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
vercel --prod
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

1. **Date-fnsã®ãƒ­ã‚±ãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼**
   - `ja`ãƒ­ã‚±ãƒ¼ãƒ«ãŒæ­£ã—ãã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

2. **Tailwind CSSãŒé©ç”¨ã•ã‚Œãªã„**
   - `postcss.config.js`ã¨`tailwind.config.ts`ã‚’ç¢ºèª
   - `globals.css`ãŒæ­£ã—ãã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

3. **shadcn/uiã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ«ãŒå´©ã‚Œã‚‹**
   - `lib/utils.ts`ã®`cn`é–¢æ•°ã‚’ç¢ºèª
   - CSSå¤‰æ•°ãŒæ­£ã—ãå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

## ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ­“è¿ã—ã¾ã™ï¼ä»¥ä¸‹ã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã«å¾“ã£ã¦ãã ã•ã„ï¼š

1. ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ
2. ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯æ˜ç¢ºã«
3. ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ 
4. READMEã‚’æ›´æ–°ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

## ã‚µãƒãƒ¼ãƒˆ

è³ªå•ã‚„ææ¡ˆãŒã‚ã‚‹å ´åˆã¯ã€GitHubã®Issueã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
