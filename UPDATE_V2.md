# UI改善 & 候補日管理機能 アップデートガイド

## 🎨 新機能

### 1. 回答画面の時間表示改善
- **色分けヘッダー**: 時間帯ごとに異なる色で視覚的に区別
  - 朝 → オレンジ
  - 昼 → 黄色
  - 夕方 → 紫
  - 夜 → 紺色
  - 終日 → 青
  - 詳細時間 → ティール
- **大きなアイコン**: 時間帯のアイコンが見やすく
- **見やすいレイアウト**: 日付と時間帯が明確に分離

### 2. 管理画面の候補日管理機能
- **候補日の追加**: イベント作成後も新しい候補日を追加可能
- **候補日の削除**: 不要な候補日を個別に削除可能
- **リアルタイム更新**: 追加・削除後は自動的にページ更新

## 📦 更新方法

### ステップ1: 新しいファイルをコピー

```bash
cd ~/Desktop

# ダウンロードしたzipを解凍
cd ~/Downloads
unzip yuru-plan-v2-improved.zip

# 更新ファイルをコピー
cp yuru-plan/components/response-form.tsx ~/Desktop/yuru-plan/components/
cp yuru-plan/components/admin-view.tsx ~/Desktop/yuru-plan/components/
cp yuru-plan/components/add-date-dialog.tsx ~/Desktop/yuru-plan/components/
cp yuru-plan/lib/event-api.ts ~/Desktop/yuru-plan/lib/
```

### ステップ2: 開発サーバーを再起動

```bash
cd ~/Desktop/yuru-plan
npm run dev
```

## 🧪 動作確認

### 回答画面の確認

1. イベントを作成
2. 回答用URLを開く
3. 候補日が色分けされて表示されることを確認
4. 時間帯（朝/昼/夕方/夜）がヘッダーに大きく表示される

### 管理画面の確認

1. 管理用URLを開く
2. 「候補日を追加」ボタンをクリック
3. ダイアログで新しい日付と時間を設定
4. 「追加」をクリック
5. ページがリロードされ、新しい候補日が表示される

### 候補日削除の確認

1. 管理画面で候補日の右側にあるゴミ箱アイコンをクリック
2. 確認ダイアログで「OK」をクリック
3. 候補日が削除される

## 🎯 改善されたポイント

### Before（以前）
```
□ 12月25日(水)
  終日
  [◯] [△] [✕]
```
小さい文字で時間情報がわかりづらい

### After（改善後）
```
┌──────────────────────────┐
│ 🌅 朝          [詳細時間] │ ← オレンジ色のヘッダー
├──────────────────────────┤
│ 12月25日(水)              │
│            [◯] [△] [✕]  │
└──────────────────────────┘
```
色分けされたヘッダーで一目瞭然

## 🔧 主な変更ファイル

### components/response-form.tsx
- `getTimeBackgroundColor()` - 時間帯の背景色
- `getTimeTextColor()` - 時間帯の文字色
- 候補日カードのレイアウト改善

### components/admin-view.tsx
- `handleAddDate()` - 候補日追加機能
- `handleDeleteDate()` - 候補日削除機能
- 候補日一覧に追加・削除ボタンを追加

### components/add-date-dialog.tsx（新規）
- 候補日追加用のダイアログコンポーネント
- 日付、時間タイプ、時間の設定UI

### lib/event-api.ts
- `addEventDate()` - 候補日追加API
- `deleteEventDate()` - 候補日削除API

## 💡 使い方のヒント

### 候補日の追加タイミング
- イベント作成時に追加し忘れた日付がある場合
- 参加者から追加の希望日が出た場合
- 当初の候補日では都合が合わない人が多い場合

### 候補日の削除タイミング
- 会場が取れなくなった日付
- 参加者の都合が明らかに悪い日付
- 誤って追加してしまった日付

## ⚠️ 注意事項

### 候補日削除時の影響
候補日を削除すると、その日付への**既存の回答も削除**されます。
削除前に必ず確認ダイアログが表示されるので、よく確認してから実行してください。

### データベースの整合性
候補日の追加・削除後はページが自動的にリロードされます。
リロード中は他の操作を行わないでください。

## 🚀 今後の拡張案

- [ ] 候補日の一括追加（複数日を一度に追加）
- [ ] 候補日の並び替え（ドラッグ&ドロップ）
- [ ] 候補日の時間編集機能
- [ ] 候補日のコピー機能

## 📞 サポート

問題が発生した場合は、以下を確認してください：

1. ブラウザのコンソール（F12）でエラーを確認
2. 開発サーバーのログを確認
3. Supabaseのダッシュボードでデータを確認

それでも解決しない場合は、エラーメッセージをコピーして質問してください！
